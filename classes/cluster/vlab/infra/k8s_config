classes:
- system.reclass.storage.system.kubernetes_proxy_cluster
- system.salt.minion.cert.k8s_server
- system.reclass.storage.system.kubernetes_control_cluster

parameters:
  _param:


  reclass:
    storage:
      data_source:
        engine: local
      node:
        kubernetes_control_node01:
          params:
            tenant_address: ${_param:kubernetes_control_node01_tenant_address}
            deploy_address: ${_param:kubernetes_control_node01_deploy_address}
        kubernetes_control_node02:
          params:
            tenant_address: ${_param:kubernetes_control_node02_tenant_address}
            deploy_address: ${_param:kubernetes_control_node02_deploy_address}
        kubernetes_control_node03:
          params:
            tenant_address: ${_param:kubernetes_control_node03_tenant_address}
            deploy_address: ${_param:kubernetes_control_node03_deploy_address}
        kubernetes_compute_node001:
          name: ${_param:kubernetes_compute_rack01_hostname}001
          domain: ${_param:cluster_domain}
          classes:
            - cluster.vlab.kubernetes.compute
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: ${_param:kubernetes_compute_rack01_single_subnet}.101
            deploy_address: ${_param:kubernetes_compute_rack01_deploy_subnet}.101
            tenant_address: ${_param:kubernetes_compute_rack01_tenant_subnet}.101
        kubernetes_compute_node002:
          name: ${_param:kubernetes_compute_rack01_hostname}002
          domain: ${_param:cluster_domain}
          classes:
            - cluster.vlab.kubernetes.compute
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: ${_param:kubernetes_compute_rack01_single_subnet}.102
            deploy_address: ${_param:kubernetes_compute_rack01_deploy_subnet}.102
            tenant_address: ${_param:kubernetes_compute_rack01_tenant_subnet}.102
        kubernetes_compute_node003:
          name: ${_param:kubernetes_compute_rack01_hostname}003
          domain: ${_param:cluster_domain}
          classes:
            - cluster.vlab.kubernetes.compute
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: ${_param:kubernetes_compute_rack01_single_subnet}.103
            deploy_address: ${_param:kubernetes_compute_rack01_deploy_subnet}.103
            tenant_address: ${_param:kubernetes_compute_rack01_tenant_subnet}.103
        kubernetes_compute_node004:
          name: ${_param:kubernetes_compute_rack01_hostname}004
          domain: ${_param:cluster_domain}
          classes:
            - cluster.vlab.kubernetes.compute
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: ${_param:kubernetes_compute_rack01_single_subnet}.104
            deploy_address: ${_param:kubernetes_compute_rack01_deploy_subnet}.104
            tenant_address: ${_param:kubernetes_compute_rack01_tenant_subnet}.104
